<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta content="IE=edge,chrome=1" http-equiv=X-UA-Compatible>
<meta content=320 name=MobileOptimized>
<meta content=yes name=apple-mobile-web-app-capable>
<meta content=black name=apple-mobile-web-app-status-bar-style>
<meta name=format-detection content="telephone=no">
<meta name=viewport content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta name=description content="李彦峰">
<meta name=keywords content="李彦峰,个人作品">
<title>float特性研究</title>
<style>
html,body,h3,div,p{margin: 0;padding-top: 0;}
body{font:18px/1.5 "方正兰亭细黑简体","微软雅黑",Verdana,Arial,Helvetica,sans-serif;}
/*body{font-family: "simsun";}*/
img{vertical-align: middle;}
.contain{
	border:1px red solid;
	margin-bottom: 20px;
}
h3{
	text-align: center;
   margin-bottom: 20px;
}
.img-float{
	float: left;
	margin-right: 10px;
}
.broken-contain{
	border:1px red solid;
	padding: 20px;
}
.broken{
	background: red;
	margin-bottom: 20px;
}
.f_l{
	float: left;
}
.clearfix:after{
  content: " ";
  display: table;
  clear: both;
}
.clear{
	clear: left;	
}

.brokened{
	background: red;
	border: 1px red solid;
	width: 300px;
	clear: both;
}
.test{
	height: 200px;
	width: 200px;
}
.brokened div:nth-of-type(1){
   background: yellow;
   height: 100%;
   width: 50%;
}
.brokened div:nth-of-type(2){
   background: green;
   height: 100%;
   width: 50%;
}
.a{
	border:1px #000 solid;
}
</style>
</head>
<body>
	<div class="contain">
    <h3>float的出现就是为了实现下面的图文环绕的效果</h3>
	<img class="img-float" src="images/3.jpg" alt="">
	<p>content area 是围绕文字的一个看不见的区域</p>
	<p>inline boxes 内联盒子 不会让内容成块显示，而是排成一行，每个文字或每张图片都是一个inline boxes。分为两种，若文字由span、em、small、strong等行内元素包裹，那么这些文字就是 内联盒子，若是一个光秃秃的文字，那么就是匿名内联盒子</p>
	<p>line boxes 行框盒子 每一行就是一个行框盒子，每个行框盒子又是由一个个的 内联盒子 组成</p>
	<p>containing box p标签所在的包含盒子，次盒子有一行行 行框盒子 组成</p>
	<p>关系是 包含盒子 包含 行框盒子、行框盒子 包含 内联盒子</p>
	<p>
	    行高决定内联盒子高度。<br>
	    内容区域高度 + 行间距 = 行高。<br>
	    内容区域大小只与字号和字体有关，行间距墙头草，可大可小，甚至负值，是用来调节行高的，使高度正好等于行高。<br>
	    由于行高决定内联盒子高度<br>
	    所以：<br>
	    内容区域高度 + 行间距 = 内联盒子高度。<br>

	    不设置高度的话：<br>
	    高度 = 行高<br>
	    故不设置高度<br>
	    内联盒子高度 = 高度。<br>

	</p>
	<p>img标签与父元素底部出现空白的原因是：图片和文字基线要对齐，这是由inline boxes决定的</p>
	<p>文字环绕分为两种：第一种是图片和文字在一个标签内，浮动破坏了 图片本身的 inline box 或者 说切除了本身的 inline box，导致图片文环绕</p>
	<p>文字环绕分为两种：第二种是图片和文字部在一个标签内，浮动之后，后面的兄弟元素要向前靠，同时内容要显示出来</p>
	</div>

	<div class="broken-contain clearfix">
		<h3>float的包裹性即inline-block性</h3>
        <div class="broken">
        	<img src="images/3.jpg" width="100" height="100">
        </div>
        <p>div使用了float:left之后，变成了下面这样，体现了float的包裹性。当然若是显式的指定父元素的宽高就不具有包裹性（设置谁，谁不包裹）</p>
        <div class="broken f_l">
        	<img src="images/3.jpg" width="100" height="100">
        </div>  

        <h3 class="clear">float的破坏性</h3>    

        <div class="brokened">
        	<img src="images/3.jpg" alt="" width="100" height="100">
        </div>   
        <p>图片使用了float:left之后。高度塌陷。当然，若是显式的指定父元素高度就不会塌陷。</p>
        <div class="brokened">
        	<img class="f_l" src="images/3.jpg" alt="" width="100" height="100">
        </div> 
        <p style="clear:both;">图片使用了float:left之后。显式指定父元素的高度为120px。高度不塌陷。</p>
        <div class="brokened" style="height:120px;">
        	<img class="f_l" src="images/3.jpg" alt="" width="100" height="100">
        </div>
        <p style="clear:both;">清除浮动的影响又变正常了</p>
        <div class="brokened clearfix">
        	<img src="images/3.jpg" alt="" width="100" height="100">
        </div>
        <h3 class="clear">float布局的注意事项</h3>  
        <p style="clear:both;">浮动布局必须让子元素的宽度是一定的。（固定宽度或使用百分比）</p>
        <div class="brokened clearfix test">
        	<div class="f_l"></div>
        	<div class="f_l"></div>
        </div>
        <p style="clear:both;">给内部元素加一个边框，就溢出了</p>
        <div class="brokened clearfix test">
        	<div class="f_l a"></div>
        	<div class="f_l a"></div>
        </div>

        <p style="clear:both;">给内部元素加一个padding，就溢出了</p>
        <div class="brokened clearfix test">
        	<div class="f_l a" style="padding:10px;"></div>
        	<div class="f_l a" style="padding:10px;"></div>
        </div>

        <p style="clear:both;">给内部元素加一个margin，就溢出了</p>
        <div class="brokened clearfix test">
        	<div class="f_l a" style="margin:10px;"></div>
        	<div class="f_l a" style="margin:10px;"></div>
        </div>

        <p style="clear:both;">给外部元素加一个边框,无影响</p>
        <div class="brokened clearfix test" style="border:1px #000 solid;">
        	<div class="f_l"></div>
        	<div class="f_l"></div>
        </div>

        <p style="clear:both;">给内部元素加一个padding，但从新计算内部的高度。内部的width和height减去20px的padding，减去2px的border，即共减去22px才能不乱</p>
        <div class="brokened clearfix test">
        	<div class="f_l a" style="padding:10px;width:78px;height:178px;"></div>
        	<div class="f_l a" style="padding:10px;width:78px;height:178px;"></div>
        </div>

        <p style="clear:both;">给外部元素加一个padding,无影响</p>
        <div class="brokened clearfix test" style="padding:10px;">
        	<div class="f_l"></div>
        	<div class="f_l"></div>
        </div>
         <p style="clear:both;">结论：更改外部元素的样式对布局无影响。但是更改内部元素的样式，
          border、padding、margin一定要注意对布局的影响，因为可能会溢出。由此可见content的宽度等于盒子宽度才不会溢出。
         </p>
         <h3 class="clear">float布局的注意事项之对margin的影响</h3> 
         <p style="clear:both;">正常情况。左右margin叠加为20px。add(10px,10px)</p>
		 <div style="height:50px;width:50px;background:red;margin-right:10px;display:inline-block;"></div> 
         <div style="height:50px;width:50px;background:red;margin-left:10px;display:inline-block;"></div>
         <p style="clear:both;">正常情况。上下margin折叠为20px。max(10px,20px)</p>
		 <div style="height:50px;width:50px;background:red;margin-bottom:10px;"></div> 
         <div style="height:50px;width:50px;background:red;margin-top:20px;"></div> 

         <p style="clear:both;">float情况下。左右margin叠加为30px。add(10px,20px)</p>
         <div style="height:50px;width:50px;background:red;margin-right:20px;" class="f_l"></div> 
         <div style="height:50px;width:50px;background:red;margin-left:10px;" class="f_l"></div>

         <p style="clear:both;">float情况下。上下margin叠加为30px。add(10px,20px)</p>
         <div style="height:50px;width:50px;background:red;margin-bottom:10px;"  class="f_l"></div> 
         <div style="height:50px;width:50px;background:red;margin-top:20px;clear:both" class="f_l"></div>
         
         <p style="clear:both;">上float，下不float。margin-top <= margin-bottom + 上height 时，由 margin-bottom决定，反之，下面才起作用，且大小为  margin-bottom + (margin-top - margin-bottom - 上height) ==> margin-top - 上height </p>
         <div style="height:50px;width:50px;background:red;margin-bottom:10px;"  class="f_l"></div> 
         <div style="height:50px;width:50px;background:red;margin-top:61px;clear:both"></div>
	</div>
<script>
	
	(function(){
     
     function getStyle (obj,attr) {
		if(obj.currentStyle){
			return obj.currentStyle[attr];
		}else{
			return getComputedStyle(obj,false)[attr];
		}
	 };
	 window.getStyle = getStyle;
	 // var query = document.querySelector; //错误
	 // console.log(query(".broken"));
	 // var splice = Array.prototype.splice; //正确
	 // alert(splice.call([1,2,3],2));
	})();
    
	console.log(getStyle(document.body,"lineHeight"));
	console.log(getStyle(document.body,"fontSize"));
	var span = document.querySelector(".span");

	console.log(getStyle(span,"height"));
	

</script>
</body>
</html>